System.register("chunks:///_virtual/HotUpdate.ts",["cc","./UpdatePanel.ts"],(function(e){"use strict";var t,a,s,i,n,r,o,l;return{setters:[function(e){t=e.cclegacy,a=e.Asset,s=e.Node,i=e._decorator,n=e.Component,r=e.game,o=e.sys},function(e){l=e.UpdatePanel}],execute:function(){var d,c,f,h,b,p,g,m,u;function _(e,t,a,s){a&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0})}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t,a,s,i){var n={};return Object.keys(s).forEach((function(e){n[e]=s[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce((function(a,s){return s(e,t,a)||a}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}t._RF.push({},"8ee7ate7OVDEph2ruFCYLQZ","HotUpdate",void 0);const A=window.jsb;var y=JSON.stringify({packageUrl:"http://127.0.0.1:5500/remote-assets/",remoteManifestUrl:"http://127.0.0.1:5500/remote-assets/project.manifest",remoteVersionUrl:"http://127.0.0.1:5500/remote-assets/version.manifest",version:"1.0.1",assets:{"src/application.js":{size:5106,md5:"02ab1ca7d9a0d06d3d7d8ab279881b8d"},"src/chunks/bundle.js":{size:1935,md5:"783e7dfdcd833123e46754ad439553af"},"src/cocos-js/cc.js":{size:5787090,md5:"4ee4ca556b790be41e8b10e55e8c8102"},"src/cocos-js/glsl1-ad847f02.js":{size:129117,md5:"768e74b5b88b232b5587d8f8d9517792"},"src/cocos-js/glsl3-9896e095.js":{size:144213,md5:"bb81211de1723253e210ee5ca1057702"},"src/cocos-js/glsl4-fe9122f5.js":{size:151634,md5:"c8b174876db8c60db7f80e8e7bad9b2f"},"src/import-map.json":{size:51,md5:"0a4b903dc20b74fe4a5a977a98b9d094"},"src/settings.json":{size:32156,md5:"bf277e8a18555d638c3746fbf2f01a8b"},"src/system.bundle.js":{size:19628,md5:"61644e34333c0b0ac77bd7f3085ccf2b"},"assets/main/config.json":{size:2243,md5:"57c06265bde1288eb6d4ab0da3e2f187"},"assets/main/import/08/0897a7610.json":{size:318,md5:"31d47437140f3bb8e5fab4936a9725f0"},"assets/main/import/0f/0f4f09600.json":{size:7842,md5:"e544000e4d8a737575f704f049072b11"},"assets/main/import/70/700faa17-11a6-46cd-aeb5-d6900bc264f8.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/9e/9e71ecbc-8d63-45dd-b0e3-26cefa3d07b1.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/ae/ae4e2188-2b7b-42a9-85e1-8fb987600b04.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/c1/c1e757ac-f5bb-46ed-b86a-fdabff7aeb55.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/ed/edd97988-52a3-4312-8671-90a51bb563ae.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/fd/fd8ec536-a354-4a17-9c74-4f3883c378c8.json":{size:675,md5:"de4c2079ad4142452051aced1cc11fba"},"assets/main/index.js":{size:24117,md5:"a754392fea5b84716cda88fb617ece87"},"assets/main/native/70/700faa17-11a6-46cd-aeb5-d6900bc264f8.png":{size:3765,md5:"878e89a0a3e02b13beee9f3274f2ca39"},"assets/main/native/80/800f94fd-7424-4202-9629-d3ca77f3b72d.manifest":{size:2941,md5:"10e6dfa38ddbd0932ab036826db3df2b"},"assets/main/native/9e/9e71ecbc-8d63-45dd-b0e3-26cefa3d07b1.png":{size:2548,md5:"ae7a04af25e238a5478170759b55a7ba"},"assets/main/native/ae/ae4e2188-2b7b-42a9-85e1-8fb987600b04.png":{size:634171,md5:"07b03f7145b75579708ae05ea2a2c029"},"assets/main/native/c1/c1e757ac-f5bb-46ed-b86a-fdabff7aeb55.png":{size:18969,md5:"8eaaf03d4497b39525214bf039a11a7d"},"assets/main/native/ed/edd97988-52a3-4312-8671-90a51bb563ae.png":{size:1829,md5:"94d761c4626df88053787f17fa09914d"},"jsb-adapter/jsb-builtin.js":{size:170818,md5:"15b9314f7a08f365d2fe6651d0c3bf5e"},"jsb-adapter/jsb-engine.js":{size:75321,md5:"c1b82d5d33554752739440fe1514e209"}},searchPaths:[]});const{ccclass:M,property:U}=i;e("HotUpdate",(d=M("HotUpdate"),c=U(l),f=U(a),h=U(s),d((g=E((p=class extends n{constructor(...e){super(...e),_(this,"panel",g,this),_(this,"manifestUrl",m,this),_(this,"updateUI",u,this),v(this,"_updating",!1),v(this,"_canRetry",!1),v(this,"_storagePath",""),v(this,"_am",null),v(this,"_checkListener",null),v(this,"_updateListener",null),v(this,"_failCount",0),v(this,"versionCompareHandle",null)}checkCb(e){switch(console.log("Code: "+e.getEventCode()),e.getEventCode()){case A.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.panel.info.string="No local manifest file found, hot update skipped.";break;case A.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case A.EventAssetsManager.ERROR_PARSE_MANIFEST:this.panel.info.string="Fail to download manifest file, hot update skipped.";break;case A.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string="Already up to date with the latest remote version.";break;case A.EventAssetsManager.NEW_VERSION_FOUND:this.panel.info.string="New version found, please try to update. ("+Math.ceil(this._am.getTotalBytes()/1024)+"kb)",this.panel.checkBtn.active=!1,this.panel.fileProgress.progress=0,this.panel.byteProgress.progress=0;break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1}updateCb(e){var t=!1,a=!1;switch(e.getEventCode()){case A.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.panel.info.string="No local manifest file found, hot update skipped.",a=!0;break;case A.EventAssetsManager.UPDATE_PROGRESSION:this.panel.byteProgress.progress=e.getPercent(),this.panel.fileProgress.progress=e.getPercentByFile(),this.panel.fileLabel.string=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this.panel.byteLabel.string=e.getDownloadedBytes()+" / "+e.getTotalBytes(),console.log(this.panel.fileLabel.string,this.panel.byteLabel.string);var s=e.getMessage();s&&(this.panel.info.string="Updated file: "+s);break;case A.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case A.EventAssetsManager.ERROR_PARSE_MANIFEST:this.panel.info.string="Fail to download manifest file, hot update skipped.",a=!0;break;case A.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string="Already up to date with the latest remote version.",a=!0;break;case A.EventAssetsManager.UPDATE_FINISHED:this.panel.info.string="Update finished. "+e.getMessage(),t=!0;break;case A.EventAssetsManager.UPDATE_FAILED:this.panel.info.string="Update failed. "+e.getMessage(),this.panel.retryBtn.active=!0,this._updating=!1,this._canRetry=!0;break;case A.EventAssetsManager.ERROR_UPDATING:this.panel.info.string="Asset update error: "+e.getAssetId()+", "+e.getMessage();break;case A.EventAssetsManager.ERROR_DECOMPRESS:this.panel.info.string=e.getMessage()}if(a&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),t){this._am.setEventCallback(null),this._updateListener=null;var i=A.fileUtils.getSearchPaths(),n=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(n)),Array.prototype.unshift.apply(i,n),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(i)),A.fileUtils.setSearchPaths(i),setTimeout((()=>{r.restart()}),1e3)}}loadCustomManifest(){if(this._am.getState()===A.AssetsManager.State.UNINITED){var e=new A.Manifest(y,this._storagePath);this._am.loadLocalManifest(e,this._storagePath),this.panel.info.string="Using custom manifest"}}retry(){!this._updating&&this._canRetry&&(this.panel.retryBtn.active=!1,this._canRetry=!1,this.panel.info.string="Retry failed Assets...",this._am.downloadFailedAssets())}checkUpdate(){if(this._updating)this.panel.info.string="Checking or updating ...";else{if(this._am.getState()===A.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0):this.panel.info.string="Failed to load local manifest ..."}}hotUpdate(){if(this._am&&!this._updating){if(this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===A.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}this._failCount=0,this._am.update(),this.panel.updateBtn.active=!1,this._updating=!0}}show(){!1===this.updateUI.active&&(this.updateUI.active=!0)}onLoad(){if(A){this._storagePath=(A.fileUtils?A.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",console.log("Storage path for remote asset : "+this._storagePath),this.versionCompareHandle=function(e,t){console.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var a=e.split("."),s=t.split("."),i=0;i<a.length;++i){var n=parseInt(a[i]),r=parseInt(s[i]||"0");if(n!==r)return n-r}return s.length>a.length?-1:0},this._am=new A.AssetsManager("",this._storagePath,this.versionCompareHandle);var e=this.panel;this._am.setVerifyCallback((function(t,a){var s=a.compressed,i=a.md5,n=a.path;a.size;return s?(e.info.string="Verification passed : "+n,!0):(e.info.string="Verification passed : "+n+" ("+i+")",!0)})),this.panel.info.string="Hot update is ready, please check or directly update.",o.os===o.OS_ANDROID&&(this._am.setMaxConcurrentTask(2),this.panel.info.string="Max concurrent tasks count have been limited to 2"),this.panel.fileProgress.progress=0,this.panel.byteProgress.progress=0}}onDestroy(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)}}).prototype,"panel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=E(p.prototype,"manifestUrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=E(p.prototype,"updateUI",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b));t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdatePanel.ts",["cc"],(function(e){"use strict";var i,t,r,n,l,a;return{setters:[function(e){i=e.cclegacy,t=e.Label,r=e.ProgressBar,n=e.Node,l=e._decorator,a=e.Component}],execute:function(){var o,u,c,b,s,f,p,h,g,y,d,z,m,v,w,P,B,L,k,j,U;function _(e,i,t,r){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function F(e,i,t,r,n){var l={};return Object.keys(r).forEach((function(e){l[e]=r[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=t.slice().reverse().reduce((function(t,r){return r(e,i,t)||t}),l),n&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(n):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,i,l),l=null),l}i._RF.push({},"d896fFhBk9A57gLMvEj3KZ7","UpdatePanel",void 0);const{ccclass:O,property:x}=l;e("UpdatePanel",(o=O("UpdatePanel"),u=x(t),c=x(r),b=x(t),s=x(r),f=x(t),p=x(n),h=x(n),g=x(n),y=x(n),o((m=F((z=class extends a{constructor(...e){super(...e),_(this,"info",m,this),_(this,"fileProgress",v,this),_(this,"fileLabel",w,this),_(this,"byteProgress",P,this),_(this,"byteLabel",B,this),_(this,"close",L,this),_(this,"checkBtn",k,this),_(this,"retryBtn",j,this),_(this,"updateBtn",U,this)}onLoad(){}}).prototype,"info",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=F(z.prototype,"fileProgress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=F(z.prototype,"fileLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=F(z.prototype,"byteProgress",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=F(z.prototype,"byteLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F(z.prototype,"close",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=F(z.prototype,"checkBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=F(z.prototype,"retryBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=F(z.prototype,"updateBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=z))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UpdatePanel.ts","./HotUpdate.ts"],(function(){"use strict";return{setters:[function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});